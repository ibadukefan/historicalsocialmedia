# DEV LOG — Tempus

Last Updated: 2026-01-01

## Quick Reference
- **Stack:** Next.js 14 (App Router, SSG), TypeScript, Tailwind CSS, Shadcn/UI patterns, TanStack Virtual
- **Status:** Phase 19 Complete - 1417 posts, 442 profiles, 1882 static pages (20 eras: Revolution, Rome, WWII, Renaissance, Civil Rights, French Revolution, Ancient Greece, WWI, Industrial Revolution, Viking Age, Medieval Crusades, Ancient Egypt, American Civil War, Cold War, Age of Exploration, Byzantine Empire, Mongol Empire, African Kingdoms, Russian Revolution, Meiji Japan)
- **Active Branch:** main

## Current Focus
**IMPLEMENTING HIGH PRIORITY FEATURES** - Building out missing functionality from the comprehensive plan (PLAN.md).

## Recent Changes
- 2026-01-01 — **MEIJI JAPAN ERA:**
  - Added Meiji Japan (1868-1912) as 20th era
  - 50 posts covering the transformation from feudal shogunate to modern empire
  - 25 profiles including:
    - Leaders: Emperor Meiji, Saigo Takamori, Okubo Toshimichi, Ito Hirobumi, Yamagata Aritomo
    - Military: Admiral Togo Heihachiro, General Nogi Maresuke
    - Industrialists: Iwasaki Yataro (Mitsubishi), Shibusawa Eiichi
    - Educators: Fukuzawa Yukichi, Tsuda Umeko
    - Others: Empress Shoken, Tokugawa Yoshinobu (last Shogun), An Jung-geun (Korean patriot)
    - Ordinary people: Former samurai, farmer, factory worker, geisha, student, soldier, journalist
  - Key events covered: Meiji Restoration, Charter Oath, abolition of samurai class, Satsuma Rebellion, First railway, Meiji Constitution, Sino-Japanese War, Russo-Japanese War (Tsushima), Korea annexation, Emperor Meiji's death
  - Added 50+ relationships for Meiji profiles
  - Added 10 On This Day events for Meiji era
  - Build: 1882 static pages generated
- 2026-01-01 — **RUSSIAN REVOLUTION ERA:**
  - Added Russian Revolution (1905-1924) as 19th era
  - 50 posts covering 1905 Revolution, February Revolution, October Revolution, Civil War, and Lenin's death
  - 22 profiles including:
    - Bolsheviks: Vladimir Lenin, Leon Trotsky, Joseph Stalin, Nadezhda Krupskaya, Alexandra Kollontai
    - Romanovs: Nicholas II, Tsarina Alexandra, Anastasia Romanov
    - Key figures: Rasputin, Alexander Kerensky, Felix Yusupov, Lavr Kornilov, Nestor Makhno, Father Gapon, Yakov Yurovsky
    - Ordinary people: Worker, Soldier, Peasant, Sailor, Cheka officer, Kronstadt rebel
  - Key events covered: Bloody Sunday (1905), Rasputin's murder, February Revolution, Lenin at Finland Station, October Revolution, Romanov execution, Red Terror, Kronstadt Rebellion, Lenin's death
  - Added 60+ relationships for Russian profiles
  - Added 10 On This Day events for Russian era
  - Build: 1807 static pages generated
- 2026-01-01 — **AFRICAN KINGDOMS ERA:**
  - Added African Kingdoms (300-1600 CE) as 18th era
  - 50 posts covering 1300 years of African empires and kingdoms
  - 22 profiles including:
    - Rulers: Mansa Musa, Sundiata Keita, Tunka Manin (Ghana), Sunni Ali, Askia Muhammad (Songhai), Queen Amina (Zazzau), Queen Nzinga (Ndongo), Afonso I (Kongo), João I (Kongo), Oba Esigie (Benin), Emperor Zara Yaqob (Ethiopia), Great Zimbabwe King, Queen Idia
    - Scholars: Ahmed Baba, Timbuktu Scholar
    - Travelers: Ibn Battuta, Leo Africanus
    - Ordinary people: Griot, Salt Trader, Gold Miner, Swahili Merchant, African Slave, Ethiopian Monk
  - Key events covered: Ghana Empire fall, Battle of Kirina (Mali founded), Mansa Musa's legendary hajj, Sunni Ali captures Timbuktu, Askia Muhammad's golden age, Portuguese contact with Kongo, Battle of Tondibi (Songhai falls)
  - Added 60+ relationships for African profiles
  - Added 10 On This Day events for African era
  - Build: 1735 static pages generated
- 2026-01-01 — **MONGOL EMPIRE ERA:**
  - Added Mongol Empire (1206-1368) as 17th era
  - 50 posts covering the rise and fall of the largest land empire in history
  - 21 profiles including:
    - Khans: Genghis Khan, Ögedei Khan, Möngke Khan, Kublai Khan, Batu Khan, Hulagu Khan, Toghon Temür
    - Key figures: Börte (Empress), Subutai, Jebe, Marco Polo, Rustichello, Rashid al-Din
    - Ordinary people: Mongol warrior, Mongol woman, Silk Road merchant, Persian scholar, Chinese official, Chinese scholar, Nestorian priest
  - Key events covered: Unification of Mongols, Khwarazm campaign, Battle of Kalka River, European invasion (Legnica, Mohi), Fall of Baghdad, Ain Jalut, Conquest of Song China, Marco Polo's travels
  - Added 60+ relationships for Mongol profiles
  - Added 10 On This Day events for Mongol era
  - Build: 1663 static pages generated
- 2026-01-01 — **BYZANTINE EMPIRE ERA:**
  - Added Byzantine Empire (330-1453 CE) as 16th era
  - 50 posts covering the full span of the Eastern Roman Empire
  - 21 profiles including:
    - Emperors: Constantine the Great, Justinian I, Heraclius, Basil II, Constantine XI, Empress Irene
    - Key figures: Theodora (Empress), Belisarius (General), Anna Comnena (Historian), Procopius, Mehmed II
    - Ordinary people: Greek Fire technician, icon painter, merchant, Varangian guardsman, scholar, soldier, citizen, priest
  - Key events covered: Founding of Constantinople, Nika Riots, Hagia Sophia, Manzikert, Great Schism, Fall of Constantinople
  - Added 40+ relationships for Byzantine profiles
  - Added 10 On This Day events for Byzantine era
  - Build: 1592 static pages generated
- 2026-01-01 — **CONTENT EXPANSION - 5 NEW ERAS:**
  - **Medieval Crusades (1095-1291):** 50 posts, 11 profiles
    - Leaders: Pope Urban II, Richard the Lionheart, Saladin, Eleanor of Aquitaine, Baldwin IV (Leper King), Frederick Barbarossa
    - Orders: Templar Knights, Hospitallers
    - Ordinary People: Pilgrims, Jerusalem merchants
    - Key events: Council of Clermont, Siege of Jerusalem, Battles of Hattin and Arsuf, Fourth Crusade
  - **Ancient Egypt (3100 BCE - 30 BCE):** 50 posts, 11 profiles
    - Pharaohs: Khufu, Ramesses II, Hatshepsut, Akhenaten, Tutankhamun, Cleopatra VII
    - Royalty: Nefertiti
    - Ordinary People: Pyramid workers (Merer), scribes (Amenhotep), priestesses (Isetnofret)
    - Key events: Pyramid construction, Amarna revolution, Battle of Kadesh, Fall of Egypt
  - **American Civil War (1861-1865):** 50 posts, 11 profiles
    - Leaders: Abraham Lincoln, Robert E. Lee, Ulysses S. Grant, William Sherman
    - Abolitionists: Frederick Douglass, Harriet Tubman
    - Medical: Clara Barton (Angel of the Battlefield)
    - Soldiers: Union private (Irish immigrant), Confederate private, freed slave (Solomon)
    - Key events: Fort Sumter, Gettysburg, Emancipation Proclamation, Sherman's March, Appomattox
  - **Cold War & Space Race (1947-1991):** 50 posts, 11 profiles
    - Leaders: JFK, Khrushchev, Reagan, Gorbachev
    - Astronauts/Cosmonauts: Yuri Gagarin (first human in space), Neil Armstrong, Buzz Aldrin
    - Ordinary People: American housewife (Betty), Soviet engineer (Dmitri), Berlin citizen (Hans)
    - Key events: Sputnik, Moon landing, Cuban Missile Crisis, Berlin Wall, Glasnost/Perestroika
  - **Age of Exploration (1415-1600):** 50 posts, 10 profiles
    - Explorers: Christopher Columbus, Ferdinand Magellan, Zheng He, Vasco da Gama
    - Conquistadors: Hernán Cortés
    - Indigenous: Montezuma II (Aztec Emperor), Guacanagari (Taíno chief), Inca messenger
    - Ordinary People: Spanish sailors, Portuguese traders
    - Key events: Columbus's voyages, Magellan's circumnavigation, Fall of Tenochtitlan, Zheng He's treasure fleet
  - Total: 250 new posts, 50 new profiles across 5 new eras
  - Added 80+ new relationships connecting profiles within and across eras
  - Added 45+ On This Day historical events for new eras
  - Fixed incorrectly tagged events (Fort Sumter, Moon landing, Berlin Wall)
- 2026-01-01 — **DATA EXPORT ENHANCEMENT:**
  - Enhanced export with full post details (author, content, date, era, likes, URL)
  - Full profile details for followed profiles (name, handle, bio, era, followers)
  - Comments export with post author context and timestamps
  - Individual data type exports (likes only, bookmarks only, follows only, comments only)
  - Complete export includes summary, achievements, and era breakdown
  - Proper CSV escaping for content with commas/quotes/newlines
  - Updated Export tab UI with individual export buttons per data type
  - JSON exports include exportInfo metadata and structured data
- 2026-01-01 — **RELATIONSHIP NETWORK:**
  - Created relationships.json with 50+ historical relationships across all eras
  - Relationship types: spouse, family, friend, ally, colleague, mentor, student, rival, enemy
  - RelationshipNetwork component with list and visual network views
  - Connected profiles shown on profile pages
  - Visual network diagram with radial layout
  - Color-coded relationship types with icons
  - Bidirectional relationship detection (shows incoming and outgoing connections)
  - Expandable/collapsible categories in list view
  - Relationships span American Revolution, Ancient Rome, French Revolution, Renaissance, Civil Rights, WWII, Ancient Greece, Viking Age
- 2026-01-01 — **ANALYTICS INTEGRATION:**
  - Installed @vercel/analytics for page view tracking
  - Installed @vercel/speed-insights for Web Vitals monitoring
  - Added Analytics and SpeedInsights components to root layout
  - Automatic page view tracking on navigation
  - Core Web Vitals: LCP, FID, CLS, TTFB, INP
  - Zero configuration required - works automatically on Vercel
- 2026-01-01 — **OPEN GRAPH IMAGES:**
  - Generated 17 OG images for social media previews (1200x630)
  - Default site OG image with Tempus branding
  - Era-specific OG images with unique color schemes (10 images)
  - Generic images for posts, profiles, threads, explore, search, on-this-day
  - All images feature hourglass branding and gradient backgrounds
  - Updated metadata in layout.tsx, post/[id], profile/[id], era/[id], thread/[id], explore
  - Twitter cards with summary_large_image format
  - Icon generation script: scripts/generate-og-images.js
- 2026-01-01 — **PWA SUPPORT:**
  - Created manifest.json with app metadata, shortcuts, and categories
  - Service worker (sw.js) with offline support and caching strategies
  - Generated app icons at all required sizes (72x72 to 512x512)
  - Apple touch icon for iOS home screen
  - ServiceWorkerProvider component with install prompt and update notifications
  - Offline indicator when network is unavailable
  - Install banner appears after 30 seconds on first visit
  - Update banner when new version is available
  - Network-first caching for pages, cache-first for static assets
  - Icon generation script (scripts/generate-icons.js)
  - PWA meta tags (viewport, theme-color, apple-web-app)
- 2026-01-01 — **THREAD SUPPORT:**
  - Created ThreadView component for displaying connected thread posts
  - Thread page at `/thread/[id]` with static generation for all threads
  - Posts in threads show "Show this thread" link
  - Thread connector lines showing post sequence (1/5, 2/5, etc.)
  - ThreadPreview component for compact feed display
  - Highlight specific post via `?highlight=post-id` URL parameter
  - Share menu for threads (Twitter, Facebook, LinkedIn, copy link)
  - Created threads.json with 3 sample threads (15 posts):
    - Franklin explaining the kite experiment
    - Jefferson on writing the Declaration
    - Washington on crossing the Delaware
  - Thread navigation preserves scroll position to highlighted post
- 2026-01-01 — **KEYBOARD SHORTCUTS:**
  - Created KeyboardShortcutsProvider with global keyboard event handling
  - `?` - Show keyboard shortcuts help modal
  - `j/k` - Navigate between posts (with visual focus ring)
  - `l` - Like/unlike focused post
  - `b` - Bookmark/unbookmark focused post
  - `c` - Open comments on focused post
  - `s` - Share focused post
  - `x` - Show historical context
  - `Enter` - Open focused post
  - `Escape` - Close modal or unfocus post
  - `g h/e/p/n/m` - Go to Home/Explore/Profiles/Notifications/Me
  - Added keyboard icon button to header (visible on desktop)
  - Shortcuts disabled when typing in input fields
  - KeyboardNavigablePost wrapper for posts with focus handling
- 2026-01-01 — **ON THIS DAY ENHANCEMENT:**
  - Expanded historical events database to cover all 10 eras (60+ events)
  - Events from Ancient Greece (Marathon, Thermopylae, Salamis), Rome (Rubicon, Caesar, Vesuvius)
  - Viking Age (Lindisfarne, Stamford Bridge, Hastings), Renaissance (Columbus, Shakespeare, Luther)
  - French Revolution (Bastille, Louis XVI, Robespierre, Napoleon)
  - WWI (Franz Ferdinand, Somme, Armistice), WWII (Pearl Harbor, D-Day, Hiroshima)
  - Civil Rights (Rosa Parks, MLK, Malcolm X, JFK, Berlin Wall)
  - Industrial Revolution (Titanic, Railway)
  - Added era filter dropdown with event counts per era
  - Shows events across all years on the same calendar date
  - BCE year support (e.g., "490 BCE" for Marathon)
  - Location displayed for each event
  - Posts filtered by selected era
  - "Today" badge when viewing current date
  - Wrap-around navigation (Dec 31 → Jan 1)
- 2026-01-01 — **USER PROFILE PAGE (/me):**
  - Created user profile page at `/me`
  - Stats overview: likes, bookmarks, follows, comments, notifications
  - Era interests breakdown with visual bars
  - 8 achievements system (First Like, Bookworm, Social Butterfly, Conversationalist, Time Traveler, Historian, Era Expert, Completionist)
  - Editable display name (persisted to localStorage)
  - Quick actions grid to explore eras, profiles, trending, on this day
  - Data export functionality (JSON and CSV formats)
  - Three tabs: Overview, Achievements, Export
  - Added "Your Profile" link to sidebar
- 2026-01-01 — **NOTIFICATION SYSTEM:**
  - Created NotificationsProvider with localStorage persistence
  - Notification types: like, comment, follow, mention, trending, new_post, event, milestone
  - Generates notifications based on user activity (follows, likes)
  - Historical event notifications based on current date (July 4th, Bastille Day, Armistice Day, etc.)
  - "New post from followed user" notifications
  - "Your liked post is trending" notifications
  - "Time Traveler Achievement" milestone when user reaches activity thresholds
  - Mark as read/unread, mark all as read, clear all, delete individual
  - Notification badge in header shows real unread count
  - Notifications page with unread/read sections
  - Color-coded notification types with icons
  - Links to relevant content (posts, profiles, eras)
- 2026-01-01 — **REAL TRENDING CALCULATION:**
  - Trending hashtags now calculated from actual post data
  - Era filter dropdown to view trends per era
  - Stats overview: total posts, hashtags, engagements, avg likes
  - Engagement bars showing relative popularity
  - Top posts ranked by weighted engagement (likes + comments*2 + shares*3)
  - Top profiles ranked by total engagement
  - Hashtags link to search results
  - RightSidebar trending and suggested profiles now use real data
- 2026-01-01 — **ENHANCED SEARCH FILTERS:**
  - Added era dropdown filter (all 10 eras with post counts)
  - Added author/person filter with searchable dropdown (281 profiles)
  - Added location filter with autocomplete suggestions
  - Added year range filter (From Year / To Year)
  - Active filters shown as removable chips
  - Search now also searches location names
  - Era filter also applies to People tab
  - Profile results show era badges
  - Results limited to 100 with notice for large result sets
- 2026-01-01 — **ERROR BOUNDARIES:**
  - Created ErrorBoundary class component with retry functionality
  - Created SafePostCard wrapper for individual post error isolation
  - Added route-level error handlers (error.tsx) for all dynamic routes
  - Added global-error.tsx for root layout errors
  - Friendly error messages with themed UI
  - Development mode shows error details for debugging
  - Individual post errors don't crash the entire feed
- 2026-01-01 — **ACCESSIBILITY IMPROVEMENTS:**
  - Added skip navigation link for keyboard users
  - Added role="main" and id="main-content" to main content area
  - Fixed all avatar images to have proper alt text
  - Added aria-labels to all icon-only buttons (more options, follow, search, menu)
  - Added aria-expanded to mobile menu toggle
  - Added aria-hidden="true" to decorative icons
  - Created LiveAnnouncerProvider for screen reader announcements
  - Likes, bookmarks, and follows now announce changes to screen readers
  - Notification badges now have proper screen reader text
  - Search inputs have type="search" and aria-label attributes
- 2026-01-01 — **COMPREHENSIVE PLAN CREATED:**
  - Created PLAN.md with full development roadmap
  - Identified 20+ features/improvements across HIGH/MEDIUM/LOW priority
  - HIGH: Individual post page, comments, profile tabs, settings, accessibility, error boundaries
  - MEDIUM: Content expansion (5 new eras), enhanced search, trending, notifications, user profile
  - LOW: Keyboard shortcuts, PWA, images, OG images, analytics
  - Estimated 95-130 hours total work
- 2026-01-01 — **SETTINGS PERSISTENCE:**
  - Created SettingsProvider with localStorage persistence
  - All settings now save and persist across sessions
  - Settings: reduce motion, content density, default region, show context by default, show accuracy badges, daily digest, new era alerts
  - Added CSS for reduce-motion (disables animations) and compact-mode (tighter spacing)
  - Added reset button to restore defaults
- 2026-01-01 — **PROFILE TABS FUNCTIONALITY:**
  - Created ProfileTabs client component with 4 tabs: Posts, Replies, Media, Likes
  - Posts tab: All posts by author (excluding replies)
  - Replies tab: Posts that are replies (have replyToId)
  - Media tab: Posts with images/videos attached
  - Likes tab: Simulated likes based on same era, relationships, mentions
  - Tab counts displayed, responsive design with icons
- 2026-01-01 — **COMMENTS SYSTEM:**
  - Created CommentsProvider with localStorage persistence
  - Created CommentForm with custom username support
  - Created CommentThread with nested replies (3 levels deep)
  - Comments persist across sessions in localStorage
  - Reply to comments, delete own comments
  - Comment counts update dynamically in feed and post pages
  - Relative timestamps ("2h ago", "3d ago")
- 2026-01-01 — **INDIVIDUAL POST PAGE (/post/[id]):**
  - Created src/app/post/[id]/page.tsx
  - Full post view with historical context expanded by default
  - Related posts from same era and author
  - Share functionality with social media links
  - Back navigation to feed
  - Static generation for all 902 posts
- 2026-01-01 — **SITE POLISH & SEO:**
  - Fixed Explore page: Removed outdated "Coming Soon" section, replaced with dynamic era summary
  - Updated Timeline page: Description now covers all eras, not just American Revolution
  - Updated Map page: Added regions for all eras (Scandinavia, Greece, Germany, Italy, etc.), updated ASCII map, era-agnostic descriptions
  - Updated Notifications: Now shows demo notifications from all 10 eras (Vikings, Ancient Greece, Renaissance, WWI, etc.)
  - Added sitemap.xml: Dynamic sitemap with all 302 pages (static pages, eras, profiles)
  - Added robots.txt: Proper SEO configuration
- 2026-01-01 — **PHASE 10: VIKING AGE** - 21 profiles, 45 posts
  - **Legendary Vikings:** Ragnar Lothbrok, Lagertha, Bjorn Ironside, Ivar the Boneless
  - **Kings/Rulers:** Harald Fairhair, Cnut the Great, Harald Hardrada, Alfred the Great, Guthrum, Olaf Tryggvason
  - **Explorers:** Erik the Red, Leif Erikson, Freydis Eriksdottir
  - **Normans:** Rollo of Normandy, William the Conqueror
  - **Ordinary People:** Norse farmer, shield-maiden, thrall, skald, Lindisfarne monk
  - Key events: Lindisfarne raid (793), Great Heathen Army, Alfred's resistance, discovery of Greenland & Vinland, Battle of Stamford Bridge, Battle of Hastings (1066)
- 2026-01-01 — **PHASE 9: INDUSTRIAL REVOLUTION** - 20 profiles, 50 posts
  - **Inventors:** James Watt, George Stephenson, Richard Arkwright, Eli Whitney, Isambard Kingdom Brunel
  - **Industrialists:** Josiah Wedgwood, Matthew Boulton
  - **Reformers:** Robert Owen, Lord Shaftesbury
  - **Writers/Artists:** William Blake, Mary Shelley
  - **Scientists:** Humphry Davy, Michael Faraday
  - **Ordinary Workers:** Factory child, cotton mill worker, coal miner, handloom weaver, railway navvy, domestic servant
  - Key events: Watt's steam engine, Cromford Mill, Luddite riots, Peterloo Massacre, Liverpool-Manchester Railway, Factory Acts, Frankenstein published, electromagnetic induction
- 2026-01-01 — **PHASE 8: WORLD WAR I** - 20 profiles, 45 posts
  - **Leaders:** Kaiser Wilhelm II, Woodrow Wilson, Georges Clemenceau
  - **Generals:** Douglas Haig, Ferdinand Foch, John Pershing, Erich Ludendorff
  - **War Poets:** Wilfred Owen, Siegfried Sassoon
  - **Notable Figures:** Manfred von Richthofen (Red Baron), T.E. Lawrence, Edith Cavell, Mata Hari, Gavrilo Princip
  - **Ordinary Soldiers:** British Tommy, French Poilu, German soldier, American Doughboy, VAD Nurse
  - Key events: Assassination of Franz Ferdinand, Christmas Truce, Gallipoli, Verdun, Somme, Passchendaele, Belleau Wood, Armistice Day
- 2025-12-31 — **PHASE 7: ANCIENT GREECE** - 19 profiles, 60 posts
  - **Philosophers:** Socrates, Plato, Aristotle, Diogenes
  - **Warriors/Leaders:** Leonidas, Themistocles, Pericles, Alexander the Great, Philip II
  - **Historians/Writers:** Herodotus, Thucydides, Sophocles
  - **Women:** Aspasia, Queen Gorgo
  - **Scientists:** Hippocrates
  - **Enemy:** Xerxes of Persia
  - **Ordinary People:** Athenian citizen (Demokrates), Spartan soldier (Kleombrotos)
  - Key events: Persian Wars (Thermopylae, Salamis), Golden Age of Athens, Plague of Athens, Trial of Socrates, Alexander's conquests
- 2025-12-31 — **PHASE 6: FRENCH REVOLUTION** - 17 profiles, 72 posts
  - **Royalty:** Louis XVI, Marie Antoinette
  - **Revolutionaries:** Robespierre, Danton, Marat, Saint-Just, Camille Desmoulins
  - **Girondins:** Madame Roland, Charlotte Corday
  - **Women:** Olympe de Gouges (feminist writer)
  - **Rise of Napoleon:** Napoleon Bonaparte, Josephine
  - **Cross-era:** Lafayette (also in American Revolution)
  - **Ordinary People:** Sans-Culotte, Market Woman, Sanson (executioner)
  - Key events: Estates-General, Tennis Court Oath, Storming of Bastille, Women's March on Versailles, Flight to Varennes, September Massacres, Execution of Louis XVI, Reign of Terror, Thermidorian Reaction, Napoleon's coup
- 2025-12-31 — **PHASE 5: CIVIL RIGHTS MOVEMENT** - 16 profiles, 45 posts
  - **Leaders:** Martin Luther King Jr., Malcolm X, Rosa Parks, John Lewis
  - **Activists:** Medgar Evers, Fannie Lou Hamer, Diane Nash, Ella Baker
  - **Writers/Thinkers:** James Baldwin, Thurgood Marshall
  - **Movement:** Fred Hampton, Bayard Rustin, Coretta Scott King
  - **Ordinary People:** Montgomery bus riders, Freedom Riders, sit-in students
  - Key events: Montgomery Bus Boycott, sit-ins, Freedom Rides, March on Washington, Selma, MLK assassination
- 2025-12-31 — **CONTENT EXPANSION** - WWII and Renaissance expanded to 60 posts each
  - WWII: Added Dunkirk, Battle of Britain, Iwo Jima, Hiroshima, VJ Day, internment camps
  - Renaissance: Added more personal moments, rivalries, deaths, everyday life
- 2025-12-31 — **PHASE 3: RENAISSANCE & ENLIGHTENMENT** - 12 profiles, 35 posts
  - **Artists:** Leonardo da Vinci, Michelangelo
  - **Scientists:** Galileo, Isaac Newton, Nicolaus Copernicus
  - **Writers:** Shakespeare, Niccolo Machiavelli
  - **Reformers:** Martin Luther, Johannes Gutenberg
  - **Monarchs:** Queen Elizabeth I, Henry VIII, Lorenzo de' Medici
  - Key moments: Mona Lisa, Sistine Chapel, 95 Theses, Jupiter's moons, Principia Mathematica
- 2025-12-31 — **PHASE 3: WORLD WAR II** - 24 profiles, 35 posts
  - **Allied Leaders:** Winston Churchill, FDR, Eisenhower, Patton, de Gaulle, Zhukov, MacArthur, Nimitz
  - **Axis Perspective:** Rommel, Yamamoto
  - **Resistance:** Jean Moulin, Witold Pilecki, Hannah Szenes
  - **Civilians/Witnesses:** Anne Frank, Rosie the Riveter, Elie Wiesel, Ernie Pyle
  - **Soldiers:** American GI, Soviet soldier, German soldier, Tuskegee Airman, Navajo Code Talker
  - Key events: Pearl Harbor, D-Day, Stalingrad, Battle of the Bulge, VE Day, Holocaust testimonies
- 2025-12-31 — **PHASE 2: ANCIENT ROME** - 33 profiles, 60 posts
  - **Emperors:** Julius Caesar, Augustus, Nero, Trajan, Hadrian, Marcus Aurelius
  - **Political:** Cicero, Cato, Pompey, Mark Antony, Crassus, Livia, Agrippina
  - **Rebels/Warriors:** Spartacus, Vercingetorix, Boudicca
  - **Writers:** Virgil, Ovid, Seneca, Pliny the Elder, Pliny the Younger
  - **Other:** Cleopatra, Pontius Pilate, gladiator Flamma, Vestal Virgin
  - **Ordinary:** centurion, legionary, slave tutor, matron, baker, merchant, Pompeii citizen
  - Key events: Rubicon crossing, Caesar's assassination, Spartacus revolt, Great Fire, Vesuvius, Boudicca's rebellion
- 2025-12-31 — **HISTORICAL FIGURES EXPANSION:** 37 new documented historical people, 70 posts
  - **Spies:** James Armistead, Hercules Mulligan, Robert Townsend, Abraham Woodhull, Anna Strong, Lydia Darragh
  - **African Americans:** Crispus Attucks, Peter Salem, Salem Poor, Prince Whipple, James Forten, Austin Dabney, Wentworth Cheswell
  - **Women:** Sybil Ludington, Mary Ludwig Hays (Molly Pitcher), Margaret Corbin, Nancy Hart, Deborah Champion
  - **Native Americans:** Joseph Brant (Thayendanegea), Cornplanter (Gyantwaia), Polly Cooper (Oneida)
  - **International:** Casimir Pulaski, Thaddeus Kosciuszko, Baron von Steuben, Johann de Kalb, Bernardo de Gálvez
  - **Military:** Joseph Plumb Martin, Daniel Morgan, Anthony Wayne, Henry Knox, Nathanael Greene
  - **Signers:** Caesar Rodney, Button Gwinnett, Charles Carroll
  - **Loyalist:** Thomas Hutchinson | **Financier:** Haym Salomon
  - Now 405 posts total, 99 profiles
- 2025-12-31 — **PERSISTENT USER STATE:** Full localStorage persistence for user interactions
  - Likes now persist across sessions (LikesProvider)
  - Bookmarks persist across sessions (BookmarksProvider)
  - Follow functionality added (FollowsProvider) - follow/unfollow historical figures
  - Follow buttons work on profile pages, profiles list, and right sidebar
  - New `/likes` page showing all liked posts
  - New `/following` page showing followed profiles and their posts
- 2025-12-31 — **NEW PAGES & SIDEBAR COMPLETION:**
  - `/terms` - Terms of Service page
  - `/privacy` - Privacy Policy page (explains we don't collect data)
  - `/following` - Shows profiles you follow with their recent posts
  - Added Notifications and Following links to left sidebar
  - Right sidebar "Who to Follow" now fully functional
- 2025-12-31 — **COMPONENTS:**
  - `FollowButton` - Reusable follow/unfollow button with state
  - `FollowsProvider` - Context provider for follow state
  - `LikesProvider` - Context provider for likes state
- 2025-12-31 — **CONTENT EXPANSION:** Added 45 new posts covering 1777-1783 with full war timeline
  - Valley Forge hardships, French alliance, major battles
  - Washington's farewell, treaty negotiations, soldiers returning home
  - 7 new profiles: Martha Washington, John Paul Jones, Benedict Arnold, ordinary soldiers/civilians
- 2025-12-31 — **MAJOR UPDATE:** Added On This Day feature, dark mode, 56 profiles, 284 posts, loading skeletons
  - On This Day widget + dedicated page with date picker
  - Functional dark mode with localStorage persistence (header toggle + settings page)
  - 18 new profiles (Alexander Hamilton, Lafayette, Cornwallis, Mozart, Adam Smith, etc.)
  - 23 new posts covering 1777-1783 (Saratoga, Valley Forge, Yorktown, Treaty of Paris)
  - Loading skeleton components for better UX during navigation
- 2025-12-31 — **DEPLOYED TO VERCEL:** https://historicalsocialmedia.vercel.app
- 2025-12-31 — **7 NEW PAGES:** Built out the rest of the site navigation:
  - `/timeline` - Chronological timeline view with posts grouped by month
  - `/map` - World map showing posts by region (ASCII map + region breakdown)
  - `/about` - About page explaining the project, accuracy levels, methodology
  - `/trending` - Trending topics and most-liked posts
  - `/bookmarks` - Saved posts page (empty state with instructions)
  - `/notifications` - Historical notifications demo
  - `/settings` - Customization options (theme, content filters, notifications)
- 2025-12-31 — **100 NEW EVERYDAY POSTS:** Added everyday-1776.json with 100 posts from ordinary people worldwide. Multiple posts per day showing mundane life: work complaints, family moments, weather, food, neighbors, small victories. Feed now feels alive with activity from blacksmiths, bakers, weavers, farmers, merchants, soldiers across Boston, Paris, Edo, Constantinople, Canton, Madras, Mexico City, Dahomey, Ashanti Empire. Total posts now 261.
- 2025-12-31 — **AUTHENTICITY PASS #2:** Fixed 11 remaining posts that still sounded like history textbooks or were too polished. Removed: famous quotes recited too perfectly (Nathan Hale, Paine), political strategy explanations (Adams nominating Washington), movie-speech defiance (Hyder Ali), system explanations TO reader (Chen Wei), rhetorical flourishes (Equiano, Somerset), poetic endings ("The land remembers", "The ocean remembers", "The brush understands me"). All posts now feel like real people posting, not narrating history.
- 2025-12-31 — **AUTHENTICITY PASS:** Systematic rewrite across all post files for more authentic human voice. Added stream-of-consciousness, trailing thoughts, self-contradictions. Fixed posts that still sounded like history textbooks.
- 2025-12-31 — **20 NEW MUNDANE POSTS:** Added mundane posts for underrepresented global characters (Sultan biting tongue, Ashanti king awkward wave, Catherine hiccup, etc). Now 60 mundane posts total.
- 2025-12-31 — **CHARACTER VOICE GUIDE:** Added detailed voice reference for 13 key characters to CONTENT_GUIDE.md with DO/DON'T patterns and examples.
- 2025-12-31 — **KING GEORGE III:** Rewrote to be more petulant and confused rather than villainous. "I farm. I collect clocks. I'm the least tyrannical person I know."
- 2025-12-30 — **GLOBAL POSTS HUMANIZED:** Rewrote 11 posts in global-1776.json that were still announcing events (Sultan on Crimea, Louis XVI on Declaration, Catherine on troop requests, etc). Now all 161 posts are pure human feelings.
- 2025-12-30 — **HUMANIZED ALL POSTS:** Rewrote all posts to be feelings, not history narration. People don't know they're in historic moments - they're just living. Context button handles education.
- 2025-12-30 — **MUNDANE POSTS:** Added 40 "nothing posts" - everyday observations, complaints, random thoughts. Real social media is 90% mundane, 10% meaningful. See CONTENT_GUIDE.md
- 2025-12-30 — **CONTENT_GUIDE.md:** Created comprehensive guide for authentic post writing based on social media research
- 2025-12-30 — **HISTORICAL CONTEXT FEATURE:** Added "Context" button (lightbulb icon) to posts - click to see what's historically happening. Keeps posts human, education on-demand
- 2025-12-30 — **SOCIAL SHARING:** Each post now shareable to Twitter/X, Facebook, LinkedIn, Reddit + copy link
- 2025-12-30 — **GLOBAL EXPANSION:** Added 56 posts from around the world (China, Japan, Russia, Ottoman Empire, France, India, Africa, Spain, Peru, Mexico)
- 2025-12-30 — **37 PROFILES:** Emperor Qianlong, Catherine the Great, Shogun Tokugawa, Hyder Ali, Túpac Amaru II, plus ordinary people (weavers, farmers, merchants, serfs)
- 2025-12-30 — **CONTENT REWRITE:** All posts rewritten with human, in-the-moment voice. Historical explanation moved to `historicalContext` field
- 2025-12-31 — Build verified successful (166 static pages, 535 posts, 168 profiles)
- 2025-12-30 — **EXPANSION:** Added 30 posts covering 1775-1777 (Lexington, Bunker Hill, Common Sense, Trenton, Princeton)
- 2025-12-30 — Created `/explore`, `/search`, `/profiles`, `/era/[id]` pages
- 2025-12-30 — Project initialized with Next.js 14, TypeScript, core components

## Architecture

### Directory Structure
```
historicalsocialmedia/
├── src/
│   ├── app/                    # Next.js App Router
│   │   ├── layout.tsx          # Root layout with Header/Sidebars
│   │   ├── page.tsx            # Home feed page
│   │   ├── globals.css         # Global styles + Tailwind
│   │   ├── not-found.tsx       # 404 page
│   │   ├── explore/page.tsx    # Era browser
│   │   ├── search/page.tsx     # Search with filters
│   │   ├── profiles/page.tsx   # Profiles directory
│   │   ├── era/[id]/page.tsx   # Era-specific feeds
│   │   └── profile/[id]/page.tsx
│   ├── components/
│   │   ├── layout/             # Header, Sidebar, RightSidebar
│   │   ├── feed/               # PostCard, Feed
│   │   ├── thread/             # ThreadView, ThreadPreview, ShowThreadButton
│   │   ├── ui/                 # Button, Skeleton, etc.
│   │   ├── ThemeProvider.tsx   # Dark/light mode context
│   │   ├── BookmarksProvider.tsx # Bookmarks persistence
│   │   ├── LikesProvider.tsx   # Likes persistence
│   │   ├── FollowsProvider.tsx # Follows persistence
│   │   ├── CommentsProvider.tsx # Comments persistence
│   │   ├── SettingsProvider.tsx # Settings persistence
│   │   ├── NotificationsProvider.tsx # Notifications persistence
│   │   ├── KeyboardShortcutsProvider.tsx # Keyboard navigation
│   │   ├── ServiceWorkerProvider.tsx # PWA install prompt & offline
│   │   ├── LiveAnnouncer.tsx   # Screen reader announcements
│   │   ├── ErrorBoundary.tsx   # Error boundary with retry
│   │   └── FollowButton.tsx    # Reusable follow button
│   ├── lib/
│   │   ├── utils.ts            # Utility functions
│   │   └── data.ts             # Data access layer
│   ├── types/
│   │   └── index.ts            # TypeScript interfaces
│   └── data/
│       ├── posts/
│       │   ├── july-1776.json           # 24 posts (July 1776, historical events)
│       │   ├── revolution-expanded.json # 29 posts (1775-1777, historical events)
│       │   ├── revolution-1777-1783.json # 23 posts (major war events)
│       │   ├── everyday-1777-1783.json  # 42 posts (1777-1783 daily life)
│       │   ├── global-1776.json         # 57 posts (WORLDWIDE, historical events)
│       │   ├── mundane-1776.json        # 60 posts (everyday "nothing" posts)
│       │   ├── everyday-1776.json       # 100 posts (ordinary people worldwide)
│       │   ├── historical-figures.json  # 70 posts (documented historical people)
│       │   ├── ancient-rome.json        # 60 posts (Roman Republic and Empire)
│       │   ├── world-war-2.json         # 60 posts (1939-1945 WWII)
│       │   ├── renaissance.json         # 60 posts (1400-1700 Renaissance & Enlightenment)
│       │   ├── civil-rights.json        # 45 posts (1954-1968 Civil Rights)
│       │   ├── world-war-1.json         # 45 posts (1914-1918 WWI)
│       │   ├── industrial-revolution.json # 50 posts (1760-1840 Industrial)
│       │   ├── viking-age.json          # 45 posts (793-1066 Viking Age)
│       │   ├── threads.json             # 15 posts (thread format posts)
│       │   ├── medieval-crusades.json   # 50 posts (1095-1291 Crusades)
│       │   ├── ancient-egypt.json       # 50 posts (3100 BCE-30 BCE Egypt)
│       │   ├── american-civil-war.json  # 50 posts (1861-1865 Civil War)
│       │   ├── cold-war.json            # 50 posts (1947-1991 Cold War)
│       │   ├── age-of-exploration.json  # 50 posts (1415-1600 Exploration)
│       │   ├── african-kingdoms.json    # 50 posts (300-1600 African Kingdoms)
│       │   ├── russian-revolution.json  # 50 posts (1905-1924 Russian Revolution)
│       │   └── meiji-japan.json         # 50 posts (1868-1912 Meiji Japan)
│       ├── profiles/
│       │   └── index.json      # 442 profiles (20 eras + ordinary people)
│       ├── eras/
│       │   └── index.json      # Era metadata
│       └── relationships.json  # 50+ historical relationships
├── public/
│   ├── manifest.json           # PWA manifest
│   ├── sw.js                   # Service worker
│   ├── apple-touch-icon.png    # iOS home screen icon
│   ├── icons/                  # PWA icons (72-512px)
│   └── og/                     # Open Graph images (17 images)
├── scripts/
│   ├── generate-icons.js       # PWA icon generation script
│   └── generate-og-images.js   # OG image generation script
├── dev_log_archive/            # Archived dev log entries
├── package.json
├── tsconfig.json
├── tailwind.config.ts
├── postcss.config.js
├── next.config.js
└── DEV_LOG.md
```

### Key Decisions
1. **Next.js App Router** — Better layouts, streaming, and server components
2. **Static Export** (`output: 'export'`) — Pure static site, no server needed
3. **JSON for data** — Structured, typed, easy to query
4. **TanStack Virtual** — Performance for large feeds
5. **Accuracy system** — 5 levels: verified, documented, attributed, inferred, speculative
6. **Source citations** — Every post can link to primary/secondary sources
7. **Human voice + Context on-demand** — Posts written as humans would post today. Educational context in separate `historicalContext` field, revealed via "Context" button. Solves the "history textbook" problem.
8. **90/10 mundane ratio** — Real social media is 90% mundane (weather, complaints, random thoughts) and 10% meaningful. See CONTENT_GUIDE.md for taxonomy of post types.

## Active Bugs / Issues
- Images need to be added to `/public/avatars/` and `/public/images/` (using initial letters as fallback)
- None blocking - build passes successfully

## Known Solutions
- **Webpack cache corruption** — If you see "Cannot find module './XXX.js'" errors, run `rm -rf .next && npm run dev` to clear cache and rebuild
- **Date display:** Use ISO strings in data, format on render with `date-fns` patterns
- **Post type flexibility:** Single PostCard component handles all types via conditional rendering
- **Mobile navigation:** Collapsible mobile menu in Header component

## Failed Approaches
- (None yet - fresh project)

## Services & Integrations
- **Hosting:** Vercel recommended (free tier works well)
- **Images:**
  - Wikimedia Commons (public domain historical images)
  - Library of Congress Digital Collections
  - National Archives
- **Fonts:** Inter (default), system fonts fallback

## Technical Debt
- [ ] Add proper image optimization (currently `unoptimized: true`)
- [x] Implement client-side search functionality
- [x] Add loading skeletons for better UX
- [x] Create proper error boundaries
- [x] Persistent likes/bookmarks/follows (localStorage)
- [x] Add sitemap.xml (dynamic, covers all pages)
- [x] Add robots.txt

## Roadmap

### Phase 1: American Revolution - MVP (COMPLETE)
- [x] Core component library
- [x] Data schema and types
- [x] July 1776 content (52 posts)
- [x] Key profiles (15 created)
- [x] Basic feed with date grouping
- [x] Profile pages
- [x] Test full build process (25 pages generated)
- [ ] Add actual images (using initials as placeholders)
- [x] Deploy to Vercel

### Phase 1.5: GLOBAL Expansion (IN PROGRESS)
- [x] Expand timeline to 1775-1777 (28 new posts)
- [x] Implement search functionality with filters
- [x] Create era landing pages (`/era/[id]`)
- [x] Create explore page (`/explore`)
- [x] Create profiles directory (`/profiles`)
- [x] **GLOBAL VOICES:** Added 56 posts from worldwide perspectives
- [x] **37 PROFILES:** China, Japan, Russia, France, Ottoman Empire, India, Africa, Spain, Peru, Mexico
- [x] **CONTENT REWRITE:** Human, in-the-moment voice (not history textbook)
- [x] **HISTORICAL CONTEXT:** Click "Context" button on any post to learn what's actually happening historically
- [x] **BUILD:** 121 static pages, 405 posts, 99 profiles
- [x] Expand to full 1775-1783 period
- [x] Add 200+ posts total (405 posts)
- [x] Add 50+ profiles (99 profiles)
- [x] Add "On This Day" feature

### Phase 2: Ancient Rome (COMPLETE)
- [x] 60 posts (Republic and Empire)
- [x] 33 profiles (emperors, senators, gladiators, rebels, writers, citizens)
- [x] Key figures (Caesar, Augustus, Cicero, Marcus Aurelius, Cleopatra, Spartacus, etc.)
- [ ] Latin terminology integration
- [ ] New visual theme option
- [ ] Expand to 100+ posts

### Phase 3: World War II (COMPLETE)
- [x] Multi-front coverage (Europe, Pacific, Home Front)
- [x] 24 profiles (leaders, soldiers, civilians, resistance)
- [x] 35 posts covering major events
- [ ] Expand to 100+ posts
- [ ] Add photo-heavy content

### Phase 4: Renaissance & Enlightenment (COMPLETE)
- [x] Art and science focus
- [x] 12 profiles (Leonardo, Michelangelo, Galileo, Shakespeare, Newton, etc.)
- [x] 35 posts covering major moments
- [ ] Expand to 100+ posts
- [ ] Cross-cultural exchange

### Phase 5: Civil Rights Movement (COMPLETE)
- [x] 1954-1968 coverage
- [x] 16 profiles (MLK, Rosa Parks, Malcolm X, John Lewis, etc.)
- [x] 45 posts covering major events
- [ ] Expand to 60+ posts
- [ ] Add more ordinary people perspectives

## Notes

### Content Guidelines
See **CONTENT_GUIDE.md** for full taxonomy and examples. Key points:
- **90% Mundane / 10% Meaningful:** Real social media is mostly weather complaints, food thoughts, random observations. Not every post needs historical significance.
- **GLOBAL by default:** Feed always shows the ENTIRE WORLD posting, not just one region
- **In-the-moment voice:** Posts are written AS IF living through events - fears, jokes, complaints, love
- **The "Nothing Post":** At least 30% of posts should be about nothing in particular - just life
- **Historical Context (on-demand):** Educational info in `historicalContext` field. Users click "Context" to learn more.
- **Post Types:** Mundane observations (30%), venting/complaints (20%), family content (15%), self-deprecating humor (10%), questions (10%), small wins (5%), hot takes (5%), big events (5%)

### Global Profiles by Region (1776)
- **Americas:** Founding Fathers, ordinary colonists, British soldiers
- **China:** Emperor Qianlong, Canton tea merchants, Suzhou silk weavers
- **Japan:** Shogun Tokugawa Ieharu, Edo fishmongers, Kyoto geisha
- **Russia:** Catherine the Great, Tula province serfs
- **France:** Louis XVI, Marie Antoinette, Paris bakers
- **Ottoman Empire:** Sultan Abdul Hamid I, Constantinople spice merchants, sailors' wives
- **India:** Hyder Ali of Mysore, Madras weavers, East India Company clerks
- **Africa:** Ashanti King Osei Kwame, Dahomey Amazons, farmers
- **Spain/Latin America:** King Carlos III, Mexican market vendors, Túpac Amaru II
- **Diaspora:** Olaudah Equiano, James Somerset (freed slaves in London)

### Post Type Breakdown
1. `status` — General update (Facebook-style)
2. `tweet` — Short message (Twitter-style)
3. `photo` — Image with caption
4. `video` — Video description/embed
5. `article` — Long-form content
6. `quote` — Historical quote
7. `event` — Major historical event (highlighted)
8. `relationship` — Status change
9. `location` — Check-in
10. `poll` — Opinion poll
11. `thread` — Multi-part thread

### Accuracy Levels
- `verified` — Direct from historical records (green badge)
- `documented` — Well-documented fact (blue badge)
- `attributed` — Attributed quote/action (purple badge)
- `inferred` — Reasonable inference (yellow badge)
- `speculative` — Educated guess (orange badge, with note)

### Running the Project
```bash
npm install
npm run dev     # Development server
npm run build   # Production build
npm run start   # Serve production build
```

## SEO & Accessibility

### Implemented
- Semantic HTML throughout
- ARIA labels on interactive elements
- Keyboard navigation support
- Meta tags in layout
- Alt text required for all images
- Skip navigation link (skip to main content)
- Live announcer for screen reader feedback
- aria-expanded on collapsible menus

### TODO
- [ ] Add structured data (JSON-LD) for historical events
- [x] Create sitemap.xml generator (dynamic, covers all 302 pages)
- [x] Create robots.txt
- [ ] Add Open Graph images
- [x] Implement skip links

## Historical Sources (for expansion)
- Library of Congress: https://www.loc.gov/
- National Archives: https://www.archives.gov/
- Wikimedia Commons: https://commons.wikimedia.org/
- Founders Online (Adams, Jefferson, etc.): https://founders.archives.gov/
- British National Archives: https://www.nationalarchives.gov.uk/
- Yale Avalon Project: https://avalon.law.yale.edu/
